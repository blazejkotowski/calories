<h1>Hello {{ dashboard.user.name }}!</h1>
<div class="panel panel-default">
  <div class="panel-heading">Expected daily calories</div>
  <div class="panel-body">
    <div class="alert alert-danger" ng-if="dashboard.errors.expected_calories">The value {{ dashboard.errors.expected_calories }}</div>
    <div class="col-sm-6">
      <p class="text-right">
        This the amount of calories you would maximally consume every day. 
        If you exceed this amount, it will be marked red.
      </p>
    </div>
    <div class="col-sm-6">
      <form ng-submit="dashboard.updateExpectedCalories()">
        <div class="form-group">
          <input class="form-control" ng-model="dashboard.user.expected_calories" ng-disabled="dashboard.savingUser" />
          <span class="helper-block"></span>
        </div>
        <button type="submit" class="btn btn-default" ng-click="dashboard.saveSettings()" ng-disabled="dashboard.savingUser">Save</button>
      </form>
    </div>
  </div>
</div>
<div class="panel panel-default">
  <div class="panel-heading">List of your meals</div>
  <div class="panel-body">
    <table class="table">
      <thead>
        <th>ID</th>
        <th>Consumption date</th>
        <th>Consumption time</th>
        <th>Meal description</th>
        <th>Calories number</th>
        <th></th>
      </thead>
      <tbody>
        <tr ng-repeat="meal in dashboard.meals">
          <td>{{meal.id}}</td>
          <td>{{meal.consumption_date}}</td>
          <td>{{meal.consumption_time | date : 'HH:mm'}}</td>
          <td>{{meal.description}}</td>
          <td>{{meal.calories_number}}</td>
          <td>
            <button class="btn btn-xs btn-info" ng-click="dashboard.setMeal(meal)" data-toggle="modal" data-target="#editMeal">
              <span class="glyphicon glyphicon-pencil"></span>
            </button>
            <button class="btn btn-xs btn-danger" ng-click="dashboard.removeMeal(meal)" data-toggle="modal" data-target="#deleteMeal">
              <span class="glyphicon glyphicon-remove"></span>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="modal fade" id="editMeal" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">{{ dashboard.currentMeal.id ? 'Edit' : 'Add'}} meal</h4>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="description">Description</label>
          <input type="text" class="form-control" name="description" ng-model="dashboard.currentMeal.description" />
        </div>
        <div class="form-group">
          <label for="calories">Calories number</label>
          <input type="number" class="form-control" name="calories" ng-model="dashboard.currentMeal.calories_number" />
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="dashboard.saveMeal()">Save</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteMeal" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span></button>
      <h4 class="modal-title">Delete meal</h4>
    </div>
    <div class="modal-body"><p>Are you sure?</p>
    <div class="modal-footer">
      <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="dashboard.removeMeal()">Yes</button>
      <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
    </div>
  </div>
</div>